<html><head>
<title>mm2.py</title>
<meta name="Generator" content="htmlizer/[twisted, version 10.0.0]" />
<link rel="alternate" href="mm2.py" type="text/x-python" />

</head>
<body>
<pre><span class="py-src-keyword">import</span> <span class="py-src-variable">sys</span>

<span class="py-src-keyword">def</span> <span class="py-src-identifier">AssertIn</span>(<span class="py-src-parameter">obj</span>, <span class="py-src-parameter">item</span>):
  <span class="py-src-keyword">if</span> <span class="py-src-variable">obj</span> <span class="py-src-keyword">not</span> <span class="py-src-keyword">in</span> <span class="py-src-variable">item</span>:
    <span class="py-src-keyword">raise</span> <span class="py-src-variable">AssertionError</span>(<span class="py-src-string">'%s not in %s'</span> % (<span class="py-src-variable">obj</span>, <span class="py-src-variable">item</span>))


<span class="py-src-variable">NUM_CHARS</span> = <span class="py-src-number">4</span>
<span class="py-src-variable">NUM_SPACES</span> = <span class="py-src-number">3</span>

<span class="py-src-keyword">class</span> <span class="py-src-identifier">Guesser</span>(<span class="py-src-parameter">object</span>):
  
  <span class="py-src-keyword">def</span> <span class="py-src-identifier">__init__</span>(<span class="py-src-parameter">self</span>):
    <span class="py-src-variable">self</span>.<span class="py-src-variable">num_guesses</span> = <span class="py-src-number">0</span>
    <span class="py-src-variable">self</span>.<span class="py-src-variable">possibles</span> = <span class="py-src-variable">self</span>.<span class="py-src-variable">_MakePossibles</span>(<span class="py-src-variable">NUM_CHARS</span>, <span class="py-src-variable">NUM_SPACES</span>)
    <span class="py-src-keyword">print</span> <span class="py-src-variable">self</span>.<span class="py-src-variable">possibles</span>

  <span class="py-src-keyword">def</span> <span class="py-src-identifier">Guess</span>(<span class="py-src-parameter">self</span>):
    <span class="py-src-variable">self</span>.<span class="py-src-variable">num_guesses</span> += <span class="py-src-number">1</span>
    <span class="py-src-variable">num_poss</span> = <span class="py-src-variable">len</span>(<span class="py-src-variable">self</span>.<span class="py-src-variable">possibles</span>)
    <span class="py-src-variable">el</span> = <span class="py-src-variable">self</span>.<span class="py-src-variable">possibles</span>[<span class="py-src-variable">num_poss</span>-<span class="py-src-number">1</span>]
    <span class="py-src-variable">self</span>.<span class="py-src-variable">possibles</span>.<span class="py-src-variable">remove</span>(<span class="py-src-variable">el</span>)
    <span class="py-src-variable">guessans</span> = <span class="py-src-string">''</span>.<span class="py-src-variable">join</span>(<span class="py-src-variable">el</span>)
    <span class="py-src-keyword">return</span> <span class="py-src-variable">guessans</span>

  <span class="py-src-keyword">def</span> <span class="py-src-identifier">Prune</span>(<span class="py-src-parameter">self</span>, <span class="py-src-parameter">curans</span>, <span class="py-src-parameter">whites</span>, <span class="py-src-parameter">blacks</span>):
    <span class="py-src-string">"""User input is number of whites, number of blacks."""</span>
    <span class="py-src-variable">validnums</span> = <span class="py-src-string">'123456'</span>
    <span class="py-src-keyword">print</span> <span class="py-src-string">'Current answer: %s'</span> % <span class="py-src-variable">curans</span>
    <span class="py-src-keyword">print</span> <span class="py-src-string">'Num whites: %d'</span> % <span class="py-src-variable">whites</span>
    <span class="py-src-keyword">print</span> <span class="py-src-string">'Num blacks: %d'</span> % <span class="py-src-variable">blacks</span>
    <span class="py-src-variable">num_blank</span> = <span class="py-src-variable">NUM_SPACES</span> - <span class="py-src-variable">whites</span> - <span class="py-src-variable">blacks</span>
    <span class="py-src-variable">num_keep</span> = <span class="py-src-variable">NUM_SPACES</span> - <span class="py-src-variable">num_blank</span>

    <span class="py-src-variable">itertools</span>.<span class="py-src-variable">product</span>()
    
    <span class="py-src-variable">itertools</span>.<span class="py-src-variable">permutation</span>(<span class="py-src-variable">validnums</span>, <span class="py-src-variable">num_keep</span>)
    

  <span class="py-src-keyword">def</span> <span class="py-src-identifier">_MakePossibles</span>(<span class="py-src-parameter">self</span>, <span class="py-src-parameter">num_chars</span>, <span class="py-src-parameter">num_spaces</span>):
    <span class="py-src-string">"""Creates a list of tuples for all possible numbers."""</span>
    <span class="py-src-keyword">return</span> [<span class="py-src-variable">a</span> <span class="py-src-keyword">for</span> <span class="py-src-variable">a</span> <span class="py-src-keyword">in</span> <span class="py-src-variable">itertools</span>.<span class="py-src-variable">product</span>(<span class="py-src-string">'1234'</span>, <span class="py-src-variable">repeat</span>=<span class="py-src-variable">NUM_SPACES</span>)]

<span class="py-src-keyword">class</span> <span class="py-src-identifier">Tester</span>(<span class="py-src-parameter">object</span>):
  
  <span class="py-src-keyword">def</span> <span class="py-src-identifier">TestGuesser</span>(<span class="py-src-parameter">self</span>):
    <span class="py-src-variable">guesser</span> = <span class="py-src-variable">Guesser</span>()
    <span class="py-src-variable">possibles</span> = <span class="py-src-variable">guesser</span>.<span class="py-src-variable">_MakePossibles</span>(<span class="py-src-number">2</span>, <span class="py-src-number">3</span>)
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'000'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'001'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'010'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'011'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'100'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'101'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'110'</span>, <span class="py-src-variable">possibles</span>) 
    <span class="py-src-variable">AssertIn</span>(<span class="py-src-string">'111'</span>, <span class="py-src-variable">possibles</span>) 

<span class="py-src-keyword">def</span> <span class="py-src-identifier">main</span>(<span class="py-src-parameter">argv</span>):
  <span class="py-src-variable">ans</span> = <span class="py-src-variable">argv</span>[<span class="py-src-number">1</span>] <span class="py-src-comment"># '1211'</span>
  <span class="py-src-keyword">if</span> <span class="py-src-variable">len</span>(<span class="py-src-variable">ans</span>) != <span class="py-src-variable">NUM_SPACES</span>:
    <span class="py-src-keyword">print</span> <span class="py-src-string">'Your secret must be %d characters long'</span> % <span class="py-src-variable">NUM_SPACES</span>
    <span class="py-src-keyword">return</span>
  <span class="py-src-variable">correct</span> = <span class="py-src-variable">False</span>
  <span class="py-src-variable">guesser</span> = <span class="py-src-variable">Guesser</span>()
  <span class="py-src-keyword">while</span> <span class="py-src-keyword">not</span> <span class="py-src-variable">correct</span>:
    <span class="py-src-variable">curans</span> = <span class="py-src-variable">guesser</span>.<span class="py-src-variable">Guess</span>()
    <span class="py-src-keyword">print</span> <span class="py-src-string">'Guessing %s'</span> % <span class="py-src-variable">curans</span>
    <span class="py-src-keyword">if</span> <span class="py-src-variable">curans</span> == <span class="py-src-variable">ans</span>:
      <span class="py-src-variable">correct</span> = <span class="py-src-variable">True</span>
    <span class="py-src-keyword">else</span>:
      <span class="py-src-variable">myfeedback</span> = <span class="py-src-variable">raw_input</span>()
      (<span class="py-src-variable">whites</span>, <span class="py-src-variable">blacks</span>) = <span class="py-src-variable">myfeedback</span>.<span class="py-src-variable">split</span>(<span class="py-src-string">' '</span>)
      <span class="py-src-variable">guesser</span>.<span class="py-src-variable">Prune</span>(<span class="py-src-variable">curans</span>, <span class="py-src-variable">int</span>(<span class="py-src-variable">whites</span>), <span class="py-src-variable">int</span>(<span class="py-src-variable">blacks</span>))
  <span class="py-src-keyword">print</span> <span class="py-src-string">'Num guesses: %d'</span> % <span class="py-src-variable">guesser</span>.<span class="py-src-variable">num_guesses</span> 
  

<span class="py-src-keyword">if</span> <span class="py-src-variable">__name__</span> == <span class="py-src-string">'__main__'</span>:
  <span class="py-src-variable">main</span>(<span class="py-src-variable">sys</span>.<span class="py-src-variable">argv</span>)
</pre>
</body>